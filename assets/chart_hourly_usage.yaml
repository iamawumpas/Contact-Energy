type: custom:apexcharts-card
header:
  show: true
  title: Hourly Usage (Last 10 Days)
  show_states: false
apex_config:
  chart:
    height: 300
  legend:
    position: top
  xaxis:
    type: datetime
    labels:
      format: ddd
graph_span: 10d
span:
  entity_index: 0
series:
  - entity: sensor.contact_energy_usage_{{ address_icp }}
    name: Free
    color: '#008FFB'
    type: column
    data_generator: |
      return Object.entries(entity.attributes.hourly_free_data || {})
        .map(([time, value]) => [new Date(time).getTime(), value]);
    fill:
      type: gradient
      gradient:
        shadeIntensity: 0.3
        opacityFrom: 1
        opacityTo: 0.1
  - entity: sensor.contact_energy_usage_{{ address_icp }}
    name: Paid
    color: '#FEB019'
    type: column
    data_generator: |
      return Object.entries(entity.attributes.hourly_data || {})
        .map(([time, value]) => [new Date(time).getTime(), value]);
    fill:
      type: gradient
      gradient:
        shadeIntensity: 0.3
        opacityFrom: 1
        opacityTo: 0.1
card_mod:
  style:
    apexcharts$: |
      .apexcharts-canvas {
        filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.15));
      }
